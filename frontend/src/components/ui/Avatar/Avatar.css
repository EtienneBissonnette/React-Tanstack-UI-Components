/* =============================================================================
   Avatar Component
   User representation with image or initials fallback
   ============================================================================= */

.avatar {
  --avatar-size: 40px;
  --avatar-radius: var(--radius-full);
  --avatar-bg: var(--scale-200);
  --avatar-fg: var(--scale-600);
  --avatar-border: var(--scale-300);

  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: var(--avatar-size);
  height: var(--avatar-size);
  flex-shrink: 0;
  background: var(--avatar-bg);
  color: var(--avatar-fg);
  border-radius: var(--avatar-radius);
  overflow: hidden;
  user-select: none;

  /* Subtle inner shadow for depth */
  box-shadow:
    inset 0 0 0 1px rgb(from var(--avatar-border) r g b / 0.5),
    0 1px 2px rgb(0 0 0 / 0.05);

  transition:
    box-shadow var(--duration-fast),
    transform var(--duration-fast);
}

[data-theme='dark'] .avatar {
  --avatar-bg: var(--scale-800);
  --avatar-fg: var(--scale-400);
  --avatar-border: var(--scale-700);
}

/* Hover state with subtle lift */
.avatar:hover {
  transform: scale(1.02);
  box-shadow:
    inset 0 0 0 1px rgb(from var(--avatar-border) r g b / 0.5),
    0 2px 8px rgb(0 0 0 / 0.1);
}

/* =============================================================================
   Avatar Image
   ============================================================================= */

.avatar__image {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: opacity var(--duration-fast);
}

/* =============================================================================
   Avatar Initials
   ============================================================================= */

.avatar__initials {
  font-size: calc(var(--avatar-size) * 0.4);
  font-weight: var(--font-semibold);
  line-height: 1;
  letter-spacing: 0.02em;
  text-transform: uppercase;
}

/* =============================================================================
   Fallback Icon
   ============================================================================= */

.avatar__fallback-icon {
  width: 50%;
  height: 50%;
  opacity: 0.6;
}

/* =============================================================================
   Sizes
   ============================================================================= */

.avatar[data-size='xs'] {
  --avatar-size: 24px;
}

.avatar[data-size='xs'] .avatar__initials {
  font-size: 10px;
}

.avatar[data-size='sm'] {
  --avatar-size: 32px;
}

.avatar[data-size='lg'] {
  --avatar-size: 48px;
}

.avatar[data-size='xl'] {
  --avatar-size: 64px;
}

/* =============================================================================
   Shapes
   ============================================================================= */

.avatar[data-shape='square'] {
  --avatar-radius: var(--radius-md);
}

.avatar[data-size='xs'][data-shape='square'] {
  --avatar-radius: var(--radius-sm);
}

.avatar[data-size='lg'][data-shape='square'],
.avatar[data-size='xl'][data-shape='square'] {
  --avatar-radius: var(--radius-lg);
}
